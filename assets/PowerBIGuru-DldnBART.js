import{c as v,u as ns,b as as,r as u,j as t,d as pe,T as tt,A as B,m as R,e as st,a as os}from"./index-BCdylXQj.js";import{C as ge}from"./copy-CCeFQTC2.js";import{T as be}from"./type-BZeeAF9j.js";import{D as nt}from"./download-BQIf4yrq.js";import{D as at}from"./database-DuMVr_Rg.js";import{S as ot,K as is}from"./send-LVKXZOvj.js";import{C as rs}from"./chevron-down-Cy9MPIqd.js";const ls=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],cs=v("arrow-down-to-line",ls);const ds=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]],_e=v("bookmark-plus",ds);const us=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],it=v("bot",us);const hs=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],fs=v("eraser",hs);const xs=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],rt=v("grip-vertical",xs);const ms=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],ps=v("maximize-2",ms);const gs=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],bs=v("message-square",gs);const ys=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],ws=v("minimize-2",ys);const vs=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],Ns=v("notebook-pen",vs);const Cs=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],lt=v("panel-left-close",Cs);const Es=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],ct=v("panel-left-open",Es);const js=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],dt=v("panel-right-close",js);const Ss=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],ut=v("panel-right-open",Ss);const Is=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_s=v("settings",Is);const As=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],ht=v("wand-sparkles",As);var ft;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(ft||(ft={}));var xt;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(xt||(xt={}));var mt;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(mt||(mt={}));const pt=["user","model","function","system"];var gt;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(gt||(gt={}));var bt;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(bt||(bt={}));var yt;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(yt||(yt={}));var wt;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(wt||(wt={}));var ee;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(ee||(ee={}));var vt;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(vt||(vt={}));var Nt;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(Nt||(Nt={}));var Ct;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Ct||(Ct={}));class w extends Error{constructor(n){super(`[GoogleGenerativeAI Error]: ${n}`)}}class Y extends w{constructor(n,a){super(n),this.response=a}}class Lt extends w{constructor(n,a,o,i){super(n),this.status=a,this.statusText=o,this.errorDetails=i}}class M extends w{}class $t extends w{}const ks="https://generativelanguage.googleapis.com",Os="v1beta",Rs="0.24.1",Ts="genai-js";var U;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(U||(U={}));class Ms{constructor(n,a,o,i,r){this.model=n,this.task=a,this.apiKey=o,this.stream=i,this.requestOptions=r}toString(){var n,a;const o=((n=this.requestOptions)===null||n===void 0?void 0:n.apiVersion)||Os;let r=`${((a=this.requestOptions)===null||a===void 0?void 0:a.baseUrl)||ks}/${o}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}function Ds(e){const n=[];return e?.apiClient&&n.push(e.apiClient),n.push(`${Ts}/${Rs}`),n.join(" ")}async function Ls(e){var n;const a=new Headers;a.append("Content-Type","application/json"),a.append("x-goog-api-client",Ds(e.requestOptions)),a.append("x-goog-api-key",e.apiKey);let o=(n=e.requestOptions)===null||n===void 0?void 0:n.customHeaders;if(o){if(!(o instanceof Headers))try{o=new Headers(o)}catch(i){throw new M(`unable to convert customHeaders value ${JSON.stringify(o)} to Headers: ${i.message}`)}for(const[i,r]of o.entries()){if(i==="x-goog-api-key")throw new M(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new M(`Header name ${i} can only be set using the apiClient field`);a.append(i,r)}}return a}async function $s(e,n,a,o,i,r){const l=new Ms(e,n,a,o,r);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},Ks(r)),{method:"POST",headers:await Ls(l),body:i})}}async function ne(e,n,a,o,i,r={},l=fetch){const{url:d,fetchOptions:x}=await $s(e,n,a,o,i,r);return Hs(d,x,l)}async function Hs(e,n,a=fetch){let o;try{o=await a(e,n)}catch(i){Gs(i,e)}return o.ok||await Us(o,e),o}function Gs(e,n){let a=e;throw a.name==="AbortError"?(a=new $t(`Request aborted when fetching ${n.toString()}: ${e.message}`),a.stack=e.stack):e instanceof Lt||e instanceof M||(a=new w(`Error fetching from ${n.toString()}: ${e.message}`),a.stack=e.stack),a}async function Us(e,n){let a="",o;try{const i=await e.json();a=i.error.message,i.error.details&&(a+=` ${JSON.stringify(i.error.details)}`,o=i.error.details)}catch{}throw new Lt(`Error fetching from ${n.toString()}: [${e.status} ${e.statusText}] ${a}`,e.status,e.statusText,o)}function Ks(e){const n={};if(e?.signal!==void 0||e?.timeout>=0){const a=new AbortController;e?.timeout>=0&&setTimeout(()=>a.abort(),e.timeout),e?.signal&&e.signal.addEventListener("abort",()=>{a.abort()}),n.signal=a.signal}return n}function ke(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),ve(e.candidates[0]))throw new Y(`${T(e)}`,e);return Ps(e)}else if(e.promptFeedback)throw new Y(`Text not available. ${T(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ve(e.candidates[0]))throw new Y(`${T(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Et(e)[0]}else if(e.promptFeedback)throw new Y(`Function call not available. ${T(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ve(e.candidates[0]))throw new Y(`${T(e)}`,e);return Et(e)}else if(e.promptFeedback)throw new Y(`Function call not available. ${T(e)}`,e)},e}function Ps(e){var n,a,o,i;const r=[];if(!((a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0)&&a.parts)for(const l of(i=(o=e.candidates)===null||o===void 0?void 0:o[0].content)===null||i===void 0?void 0:i.parts)l.text&&r.push(l.text),l.executableCode&&r.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&r.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}function Et(e){var n,a,o,i;const r=[];if(!((a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0)&&a.parts)for(const l of(i=(o=e.candidates)===null||o===void 0?void 0:o[0].content)===null||i===void 0?void 0:i.parts)l.functionCall&&r.push(l.functionCall);if(r.length>0)return r}const Fs=[ee.RECITATION,ee.SAFETY,ee.LANGUAGE];function ve(e){return!!e.finishReason&&Fs.includes(e.finishReason)}function T(e){var n,a,o;let i="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)i+="Response was blocked",!((n=e.promptFeedback)===null||n===void 0)&&n.blockReason&&(i+=` due to ${e.promptFeedback.blockReason}`),!((a=e.promptFeedback)===null||a===void 0)&&a.blockReasonMessage&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((o=e.candidates)===null||o===void 0)&&o[0]){const r=e.candidates[0];ve(r)&&(i+=`Candidate was blocked due to ${r.finishReason}`,r.finishMessage&&(i+=`: ${r.finishMessage}`))}return i}function te(e){return this instanceof te?(this.v=e,this):new te(e)}function Bs(e,n,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=a.apply(e,n||[]),i,r=[];return i={},l("next"),l("throw"),l("return"),i[Symbol.asyncIterator]=function(){return this},i;function l(p){o[p]&&(i[p]=function(g){return new Promise(function(y,_){r.push([p,g,y,_])>1||d(p,g)})})}function d(p,g){try{x(o[p](g))}catch(y){S(r[0][3],y)}}function x(p){p.value instanceof te?Promise.resolve(p.value.v).then(C,I):S(r[0][2],p)}function C(p){d("next",p)}function I(p){d("throw",p)}function S(p,g){p(g),r.shift(),r.length&&d(r[0][0],r[0][1])}}const jt=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Ys(e){const n=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),a=Vs(n),[o,i]=a.tee();return{stream:qs(o),response:zs(i)}}async function zs(e){const n=[],a=e.getReader();for(;;){const{done:o,value:i}=await a.read();if(o)return ke(Ws(n));n.push(i)}}function qs(e){return Bs(this,arguments,function*(){const a=e.getReader();for(;;){const{value:o,done:i}=yield te(a.read());if(i)break;yield yield te(ke(o))}})}function Vs(e){const n=e.getReader();return new ReadableStream({start(o){let i="";return r();function r(){return n.read().then(({value:l,done:d})=>{if(d){if(i.trim()){o.error(new w("Failed to parse stream"));return}o.close();return}i+=l;let x=i.match(jt),C;for(;x;){try{C=JSON.parse(x[1])}catch{o.error(new w(`Error parsing JSON response: "${x[1]}"`));return}o.enqueue(C),i=i.substring(x[0].length),x=i.match(jt)}return r()}).catch(l=>{let d=l;throw d.stack=l.stack,d.name==="AbortError"?d=new $t("Request aborted when reading from the stream"):d=new w("Error reading from the stream"),d})}}})}function Ws(e){const n=e[e.length-1],a={promptFeedback:n?.promptFeedback};for(const o of e){if(o.candidates){let i=0;for(const r of o.candidates)if(a.candidates||(a.candidates=[]),a.candidates[i]||(a.candidates[i]={index:i}),a.candidates[i].citationMetadata=r.citationMetadata,a.candidates[i].groundingMetadata=r.groundingMetadata,a.candidates[i].finishReason=r.finishReason,a.candidates[i].finishMessage=r.finishMessage,a.candidates[i].safetyRatings=r.safetyRatings,r.content&&r.content.parts){a.candidates[i].content||(a.candidates[i].content={role:r.content.role||"user",parts:[]});const l={};for(const d of r.content.parts)d.text&&(l.text=d.text),d.functionCall&&(l.functionCall=d.functionCall),d.executableCode&&(l.executableCode=d.executableCode),d.codeExecutionResult&&(l.codeExecutionResult=d.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),a.candidates[i].content.parts.push(l)}i++}o.usageMetadata&&(a.usageMetadata=o.usageMetadata)}return a}async function Ht(e,n,a,o){const i=await ne(n,U.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(a),o);return Ys(i)}async function Gt(e,n,a,o){const r=await(await ne(n,U.GENERATE_CONTENT,e,!1,JSON.stringify(a),o)).json();return{response:ke(r)}}function Ut(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function se(e){let n=[];if(typeof e=="string")n=[{text:e}];else for(const a of e)typeof a=="string"?n.push({text:a}):n.push(a);return Xs(n)}function Xs(e){const n={role:"user",parts:[]},a={role:"function",parts:[]};let o=!1,i=!1;for(const r of e)"functionResponse"in r?(a.parts.push(r),i=!0):(n.parts.push(r),o=!0);if(o&&i)throw new w("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!o&&!i)throw new w("No content is provided for sending chat message.");return o?n:a}function Js(e,n){var a;let o={model:n?.model,generationConfig:n?.generationConfig,safetySettings:n?.safetySettings,tools:n?.tools,toolConfig:n?.toolConfig,systemInstruction:n?.systemInstruction,cachedContent:(a=n?.cachedContent)===null||a===void 0?void 0:a.name,contents:[]};const i=e.generateContentRequest!=null;if(e.contents){if(i)throw new M("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=e.contents}else if(i)o=Object.assign(Object.assign({},o),e.generateContentRequest);else{const r=se(e);o.contents=[r]}return{generateContentRequest:o}}function St(e){let n;return e.contents?n=e:n={contents:[se(e)]},e.systemInstruction&&(n.systemInstruction=Ut(e.systemInstruction)),n}function Qs(e){return typeof e=="string"||Array.isArray(e)?{content:se(e)}:e}const It=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Zs={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function en(e){let n=!1;for(const a of e){const{role:o,parts:i}=a;if(!n&&o!=="user")throw new w(`First content should be with role 'user', got ${o}`);if(!pt.includes(o))throw new w(`Each item should include role field. Got ${o} but valid roles are: ${JSON.stringify(pt)}`);if(!Array.isArray(i))throw new w("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new w("Each Content should have at least one part");const r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of i)for(const x of It)x in d&&(r[x]+=1);const l=Zs[o];for(const d of It)if(!l.includes(d)&&r[d]>0)throw new w(`Content with role '${o}' can't contain '${d}' part`);n=!0}}function _t(e){var n;if(e.candidates===void 0||e.candidates.length===0)return!1;const a=(n=e.candidates[0])===null||n===void 0?void 0:n.content;if(a===void 0||a.parts===void 0||a.parts.length===0)return!1;for(const o of a.parts)if(o===void 0||Object.keys(o).length===0||o.text!==void 0&&o.text==="")return!1;return!0}const At="SILENT_ERROR";class tn{constructor(n,a,o,i={}){this.model=a,this.params=o,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=n,o?.history&&(en(o.history),this._history=o.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(n,a={}){var o,i,r,l,d,x;await this._sendPromise;const C=se(n),I={safetySettings:(o=this.params)===null||o===void 0?void 0:o.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(x=this.params)===null||x===void 0?void 0:x.cachedContent,contents:[...this._history,C]},S=Object.assign(Object.assign({},this._requestOptions),a);let p;return this._sendPromise=this._sendPromise.then(()=>Gt(this._apiKey,this.model,I,S)).then(g=>{var y;if(_t(g.response)){this._history.push(C);const _=Object.assign({parts:[],role:"model"},(y=g.response.candidates)===null||y===void 0?void 0:y[0].content);this._history.push(_)}else{const _=T(g.response);_&&console.warn(`sendMessage() was unsuccessful. ${_}. Inspect response object for details.`)}p=g}).catch(g=>{throw this._sendPromise=Promise.resolve(),g}),await this._sendPromise,p}async sendMessageStream(n,a={}){var o,i,r,l,d,x;await this._sendPromise;const C=se(n),I={safetySettings:(o=this.params)===null||o===void 0?void 0:o.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(x=this.params)===null||x===void 0?void 0:x.cachedContent,contents:[...this._history,C]},S=Object.assign(Object.assign({},this._requestOptions),a),p=Ht(this._apiKey,this.model,I,S);return this._sendPromise=this._sendPromise.then(()=>p).catch(g=>{throw new Error(At)}).then(g=>g.response).then(g=>{if(_t(g)){this._history.push(C);const y=Object.assign({},g.candidates[0].content);y.role||(y.role="model"),this._history.push(y)}else{const y=T(g);y&&console.warn(`sendMessageStream() was unsuccessful. ${y}. Inspect response object for details.`)}}).catch(g=>{g.message!==At&&console.error(g)}),p}}async function sn(e,n,a,o){return(await ne(n,U.COUNT_TOKENS,e,!1,JSON.stringify(a),o)).json()}async function nn(e,n,a,o){return(await ne(n,U.EMBED_CONTENT,e,!1,JSON.stringify(a),o)).json()}async function an(e,n,a,o){const i=a.requests.map(l=>Object.assign(Object.assign({},l),{model:n}));return(await ne(n,U.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),o)).json()}class kt{constructor(n,a,o={}){this.apiKey=n,this._requestOptions=o,a.model.includes("/")?this.model=a.model:this.model=`models/${a.model}`,this.generationConfig=a.generationConfig||{},this.safetySettings=a.safetySettings||[],this.tools=a.tools,this.toolConfig=a.toolConfig,this.systemInstruction=Ut(a.systemInstruction),this.cachedContent=a.cachedContent}async generateContent(n,a={}){var o;const i=St(n),r=Object.assign(Object.assign({},this._requestOptions),a);return Gt(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(o=this.cachedContent)===null||o===void 0?void 0:o.name},i),r)}async generateContentStream(n,a={}){var o;const i=St(n),r=Object.assign(Object.assign({},this._requestOptions),a);return Ht(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(o=this.cachedContent)===null||o===void 0?void 0:o.name},i),r)}startChat(n){var a;return new tn(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},n),this._requestOptions)}async countTokens(n,a={}){const o=Js(n,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),a);return sn(this.apiKey,this.model,o,i)}async embedContent(n,a={}){const o=Qs(n),i=Object.assign(Object.assign({},this._requestOptions),a);return nn(this.apiKey,this.model,o,i)}async batchEmbedContents(n,a={}){const o=Object.assign(Object.assign({},this._requestOptions),a);return an(this.apiKey,this.model,n,o)}}class on{constructor(n){this.apiKey=n}getGenerativeModel(n,a){if(!n.model)throw new w("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new kt(this.apiKey,n,a)}getGenerativeModelFromCachedContent(n,a,o){if(!n.name)throw new M("Cached content must contain a `name` field.");if(!n.model)throw new M("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const l of i)if(a?.[l]&&n[l]&&a?.[l]!==n[l]){if(l==="model"){const d=a.model.startsWith("models/")?a.model.replace("models/",""):a.model,x=n.model.startsWith("models/")?n.model.replace("models/",""):n.model;if(d===x)continue}throw new M(`Different value for "${l}" specified in modelParams (${a[l]}) and cachedContent (${n[l]})`)}const r=Object.assign(Object.assign({},a),{model:n.model,tools:n.tools,toolConfig:n.toolConfig,systemInstruction:n.systemInstruction,cachedContent:n});return new kt(this.apiKey,r,o)}}const rn=[{keywords:["yoy","year over year","growth"],answer:"For Year-over-Year growth, use the 'YoY Growth %' pattern in the DAX Library. It uses `SAMEPERIODLASTYEAR`.",link:"/dax"},{keywords:["blue","color","hex","brand"],answer:"The official HHS Blue hex code is #005EA2. You can find the full palette in the Style Guide.",link:"/style-guide"},{keywords:["pareto","80/20"],answer:"We have a Pareto Analysis pattern in the DAX Library under 'Advanced Analytics'.",link:"/dax"},{keywords:["font","typography"],answer:"The approved font is 'Source Sans Pro'. See the Style Guide for heading sizes.",link:"/style-guide"},{keywords:["dax","measure","calculation"],answer:"The DAX Library contains patterns for Time Intelligence, Financial Formulas, and more. Check the 'DAX Library' tab.",link:"/dax"}],Q=180,Ae=4e3,ln=280,Z=(e,n,a)=>Math.min(Math.max(e,n),a),cn=()=>typeof window>"u"?360:Z(window.innerWidth*.3,Q,Ae),ye=()=>({id:"welcome",text:"Hi, I'm your Analytics Assistant. Ask me about DAX, HHS Branding, or data strategy.",sender:"bot",isSystem:!0,createdAt:new Date().toISOString()}),Ot=[{label:"Generate DAX",value:"Create a reusable DAX measure for year-over-year revenue with clear comments."},{label:"Explain Visual",value:"Explain how to design an executive KPI card for Power BI with HHS branding guidance."},{label:"Build Checklist",value:"Give me a pre-publish checklist for a Power BI report destined for leadership review."},{label:"Debug Measure",value:"Help me troubleshoot why my DAX measure is returning blank values."}],Rt="guru_session_notes",Tt="guru_messages",Mt="guru_font_size",Dt="guru_line_height",z={small:{label:"Small",message:"text-xs",meta:"text-[10px]",code:"text-xs",description:"Compact"},medium:{label:"Medium",message:"text-sm",meta:"text-xs",code:"text-sm",description:"Default"},large:{label:"Large",message:"text-base",meta:"text-sm",code:"text-base",description:"Comfortable"},xlarge:{label:"Extra Large",message:"text-lg",meta:"text-sm",code:"text-base",description:"Accessibility"}},we={normal:{label:"Normal",class:"leading-normal"},relaxed:{label:"Relaxed",class:"leading-relaxed"},loose:{label:"Loose",class:"leading-loose"}},Kt=["gemini-2.5-flash","gemini-2.0-flash","gemini-1.5-flash","gemini-pro"],dn=["v1beta","v1"],un=Kt[0],Ne="AIzaSyDwiE6kUBveR6ncuUlphCbdK2EGqeLnMXY".trim()||"",hn=()=>{if(typeof window>"u")return"";const e=window.localStorage.getItem("gemini_api_key");return e?e.trim():""},fn=()=>{const e=hn();return e?{key:e,source:"custom"}:Ne?{key:Ne,source:"project"}:{key:"",source:"none"}},xn=(e,n=120)=>e?e.length>n?`${e.slice(0,n)}…`:e:"",Cn=()=>{const{addToast:e}=ns(),{isSidebarCollapsed:n,toggleSidebar:a}=as(),o=u.useRef(fn()),[i,r]=u.useState(()=>{if(typeof window>"u")return[ye()];try{const s=window.localStorage.getItem(Tt);return s?JSON.parse(s):[ye()]}catch(s){return console.error("Failed to parse messages",s),[ye()]}}),[l,d]=u.useState(""),[x,C]=u.useState(o.current.key),[I,S]=u.useState(o.current.source==="custom"?o.current.key:""),[p,g]=u.useState(o.current.source==="custom"),[y,_]=u.useState(!1),[ae,oe]=u.useState(!1),[ie,D]=u.useState(o.current.key?"connecting":"idle"),[Pt,L]=u.useState(""),[Oe,re]=u.useState(null),le=u.useRef(null),Ce=u.useRef(null),[Ft,Bt]=u.useState(!0),q=u.useRef(null),k=u.useRef(null),[Re,Ee]=u.useState(()=>cn()),[E,Yt]=u.useState(!1),[V,zt]=u.useState(()=>typeof window>"u"?!1:window.innerWidth>=1024),[$,je]=u.useState(()=>typeof window>"u"?"":window.localStorage.getItem(Rt)||""),[ce,qt]=u.useState(!1),[Te,Vt]=u.useState(!1),[H,Me]=u.useState(null),[de,W]=u.useState(null),[K,De]=u.useState(()=>typeof window>"u"?"medium":window.localStorage.getItem(Mt)||"medium"),[X,Le]=u.useState(()=>typeof window>"u"?"relaxed":window.localStorage.getItem(Dt)||"relaxed"),[P,$e]=u.useState(!1),ue=u.useCallback(()=>{if(!k.current||typeof window>"u")return Ae;const s=window.getComputedStyle(k.current),c=parseFloat(s.columnGap||s.gap||"0")||0,h=k.current.getBoundingClientRect().width-c-ln;return Z(h,Q,Ae)},[k]),G=u.useCallback(()=>{if(typeof window>"u")return;const s=window.innerWidth>=1024;if(zt(s),!s)return;const c=ue();Ee(m=>Z(m,Q,c))},[ue]);u.useEffect(()=>{},[]),u.useEffect(()=>{if(G(),!(typeof window>"u"))return window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[G]),u.useEffect(()=>{G()},[Te,G]),u.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(Tt,JSON.stringify(i))},[i]);const He=s=>{if(!s)return;const c=document.getElementById(`message-${s}`);c&&c.scrollIntoView({behavior:"smooth",block:"start"})};u.useEffect(()=>{const s=i[i.length-1];if(s?.sender==="bot"&&!s.isSystem&&H?.id){He(H.id);return}le.current?.scrollIntoView({behavior:"smooth"})},[i,H]),u.useEffect(()=>{const s=Ce.current;if(!s)return;const c=()=>{const{scrollTop:m,scrollHeight:h,clientHeight:f}=s,b=m+f>=h-10;Bt(b)};return s.addEventListener("scroll",c),c(),()=>s.removeEventListener("scroll",c)},[i]);const Ge=()=>{le.current?.scrollIntoView({behavior:"smooth"})};u.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(Rt,$)},[$]),u.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(Mt,K)},[K]),u.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(Dt,X)},[X]),u.useEffect(()=>{if(!q.current)return;const s=q.current;s.style.height="auto";const c=200;s.style.height=`${Math.min(s.scrollHeight,c)}px`},[l]),u.useEffect(()=>{const s=x.trim();if(!s){D("idle"),L(""),re(null);return}let c=!1;const m=new AbortController;return(async()=>{D("connecting"),L(""),re(null);for(const f of dn)try{const b=await fetch(`https://generativelanguage.googleapis.com/${f}/models/${encodeURIComponent(un)}?key=${encodeURIComponent(s)}`,{signal:m.signal});if(!b.ok){const N=await b.json().catch(()=>({})),j=N?.error?.message||"Unable to verify access code";if(b.status===404||N?.error?.status==="NOT_FOUND")continue;throw new Error(j)}if(c)return;D("connected"),L(""),re(f);return}catch{if(m.signal.aborted||c)return;break}D("idle"),L(""),re(null)})(),()=>{c=!0,m.abort()}},[x]);const Wt=()=>{const s=I.trim();if(!s){e("Please enter a valid access code","error");return}typeof window<"u"&&window.localStorage.setItem("gemini_api_key",s),g(!0),C(s),S(""),D("connecting"),L(""),_(!1),e("Personal access code saved. Connecting now...","success")},Xt=()=>{typeof window<"u"&&window.localStorage.removeItem("gemini_api_key");const s=Ne||"";g(!1),S(""),C(s),D(s?"connecting":"idle"),L(""),e(s?"Reverted to the built-in HHS access code.":"Access code removed. Running in local knowledge mode.","info")},Jt=s=>{const c=s.toLowerCase();return rn.find(m=>m.keywords.some(h=>c.includes(h)))},Se=async s=>{if(s)try{if(typeof navigator>"u"||!navigator.clipboard)throw new Error("Clipboard unavailable");await navigator.clipboard.writeText(s),e("Message copied to clipboard","success")}catch(c){console.error("Copy failed",c),e("Unable to copy message","error")}},Ue=()=>{confirm("Clear this conversation and start fresh?")&&(r([ye()]),e("Conversation cleared","success"),Ge(),Me(null),W(null))},Ke=()=>{const s=i.filter(f=>!f.isSystem).map(f=>`${f.sender.toUpperCase()} (${J(f,!0)}):
${f.text}`).join(`

---

`),c=new Blob([s],{type:"text/plain"}),m=URL.createObjectURL(c),h=document.createElement("a");h.href=m,h.download=`power-bi-guru-chat-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(m),e("Chat exported","success")},Pe=s=>{d(s),q.current?.focus()},Qt=async()=>{if(!$.trim()){e("No notes to copy","info");return}try{await navigator.clipboard.writeText($),e("Session notes copied","success")}catch(s){console.error("Copy notes failed",s),e("Unable to copy notes","error")}},Zt=()=>{$.trim()&&confirm("Clear session notes?")&&(je(""),e("Session notes cleared","success"))},Fe=s=>{if(!V||E||!k.current)return;s.preventDefault();const c=s.clientX,m=Re,h=document.body.style.userSelect;document.body.style.userSelect="none";const f=N=>{const j=ue(),O=N.clientX-c,fe=Z(m-O,Q,j);Ee(fe)},b=()=>{document.body.style.userSelect=h,window.removeEventListener("pointermove",f),window.removeEventListener("pointerup",b)};window.addEventListener("pointermove",f),window.addEventListener("pointerup",b)},Be=s=>{if(!V||E||!k.current||s.key!=="ArrowLeft"&&s.key!=="ArrowRight")return;s.preventDefault();const c=ue(),m=s.key==="ArrowLeft"?24:-24;Ee(h=>Z(h+m,Q,c))},Ye=()=>{Yt(s=>!s),typeof window<"u"&&requestAnimationFrame(()=>G())},es=()=>{qt(s=>!s)},ze=()=>{Vt(s=>!s)},Ie=s=>{s&&(je(c=>`${c?`${c}

`:""}${s}`),e("Saved to session notes","success"))},J=(s,c=!1)=>{if(s.isSystem&&s.id==="welcome"&&!c)return"";const m=s.createdAt||(typeof s.id=="number"?new Date(s.id).toISOString():null),h=m?new Date(m):c?new Date:null;return h?h.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""},qe=ce?"space-y-2":"space-y-4",Ve=ce?"p-3":"p-4",We=(z[K]||z.medium).meta,ts=(s,c)=>{const[m,h]=u.useState(c?"":s);return u.useEffect(()=>{if(!c){h(s);return}let f=0;const b=setInterval(()=>{if(f>=s.length){clearInterval(b),h(s);return}const j=s.length>1e3?50:s.length>500?25:10;h(s.slice(0,f+j)),f+=j},10);return()=>clearInterval(b)},[s,c]),m},Xe=({text:s,shouldAnimate:c})=>{const m=ts(s,c);if(!m)return t.jsx("span",{className:"animate-pulse",children:"..."});const h=m.split(/(```[\s\S]*?```)/g),f=z[K]||z.medium,b=we[X]||we.relaxed;return t.jsx("div",{className:`whitespace-pre-wrap ${b.class} ${f.message}`,children:h.map((N,j)=>{if(N.startsWith("```")&&N.endsWith("```")){const O=N.match(/^```(\w+)?\n([\s\S]*)```$/),fe=O?O[1]:"",xe=O?O[2]:N.slice(3,-3);return t.jsxs("div",{className:"my-3 rounded-lg bg-slate-800 text-slate-100 overflow-hidden shadow-sm border border-slate-700",children:[t.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-slate-900/50 text-slate-400 border-b border-white/10 select-none",children:[t.jsx("span",{className:`uppercase font-semibold tracking-wider ${f.meta}`,children:fe||"CODE"}),t.jsxs("button",{onClick:me=>{me.stopPropagation(),Se(xe.trim())},className:"hover:text-white flex items-center gap-1.5 transition-colors text-xs","aria-label":"Copy code",children:[t.jsx(ge,{className:"h-3 w-3"})," Copy"]})]}),t.jsx("pre",{className:`p-3 overflow-x-auto font-mono ${f.code} scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-transparent`,children:t.jsx("code",{children:xe.trim()})})]},j)}return t.jsx("span",{children:N},j)})})},he=async()=>{if(!l.trim())return;const s={id:Date.now(),text:l,sender:"user",createdAt:new Date().toISOString()};r(h=>[...h,s]),d(""),oe(!0),Me({id:s.id,text:s.text});const c=Jt(s.text);if(c){setTimeout(()=>{const h={id:Date.now()+1,text:c.answer,sender:"bot",link:c.link,createdAt:new Date().toISOString()};r(f=>[...f,h]),W(h.id),oe(!1)},600);return}const m=x.trim();if(m){try{const h=new on(m);let f,b;for(const A of Kt)try{f=h.getGenerativeModel({model:A,systemInstruction:"You are an expert Power BI Developer and Data Analyst for the US Department of Health and Human Services (HHS). Answer questions concisely and professionally. If it involves DAX, provide code snippets."});break}catch(ss){b=ss;continue}if(!f)throw b||new Error("No compatible Gemini model found");const j=[...i.filter(A=>!A.isError&&!A.isSystem).map(A=>({role:A.sender==="user"?"user":"model",parts:[{text:A.text}]})),{role:"user",parts:[{text:s.text}]}],xe=(await(await f.generateContent({contents:j,generationConfig:{maxOutputTokens:1e3}})).response).text(),me={id:Date.now()+1,text:xe,sender:"bot",createdAt:new Date().toISOString()};r(A=>[...A,me]),W(me.id)}catch(h){console.error("AI Connection Error:",h.message);const f=h.message?.includes("API_KEY")||h.message?.includes("PERMISSION_DENIED")||h.message?.includes("INVALID_ARGUMENT");f&&(D("error"),L("Invalid API key or insufficient permissions"));const b={id:Date.now()+1,text:f?"I couldn't connect to the AI service with the current access code. Please update your API key in settings, or I can help with local knowledge about DAX and Power BI.":"I'm having trouble connecting to the AI service right now. Let me help with what I know about DAX and Power BI instead.",sender:"bot",isError:!0,createdAt:new Date().toISOString()};r(N=>[...N,b]),W(b.id)}finally{oe(!1)}return}setTimeout(()=>{const h={id:Date.now()+1,text:"I don't have an answer for that in my local knowledge base. To unlock full AI capabilities, please configure the AI Access Code in settings.",sender:"bot",isSystem:!0,createdAt:new Date().toISOString()};r(f=>[...f,h]),W(h.id),oe(!1)},600)},Je=!!Ne,F=x?ie==="connected"?{text:Oe?`AI Connected (${Oe})`:"AI Connected",className:"bg-emerald-100 text-emerald-700"}:ie==="connecting"?{text:"Verifying Access Code",className:"bg-sky-100 text-sky-700"}:ie==="error"?{text:"Connection Error",className:"bg-rose-100 text-rose-700"}:null:null,Qe=!E,Ze=V?{width:`${Re}px`}:void 0,et=t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[t.jsx(Ns,{className:"h-4 w-4 text-brand-500"}),"Session Notes"]}),t.jsx("p",{className:"text-xs text-slate-500",children:"Capture insights or follow-ups"})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:Qt,className:"p-2 text-slate-400 hover:text-brand-600 hover:bg-brand-50 rounded transition-colors",title:"Copy notes","aria-label":"Copy notes",children:t.jsx(ge,{className:"h-4 w-4"})}),t.jsx("button",{onClick:Zt,className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded transition-colors",title:"Clear notes","aria-label":"Clear notes",children:t.jsx(fs,{className:"h-4 w-4"})})]})]}),t.jsx("textarea",{value:$,onChange:s=>je(s.target.value),placeholder:"Capture project context, action items, or next steps...",className:"input-field flex-1 min-h-[200px] resize-none"}),t.jsxs("p",{className:"text-[11px] text-slate-400 text-right mt-2",children:["Autosaved locally • ",$.trim().length," chars"]})]});return Te?t.jsxs("div",{className:"fixed inset-0 z-50 bg-white flex flex-col",children:[t.jsxs("div",{className:"bg-slate-50 border-b border-slate-200 px-4 py-3 flex flex-wrap items-center justify-between gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(pe,{className:"h-5 w-5 text-brand-600"}),t.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Power BI Guru"}),F&&t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${F.className}`,children:F.text})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsxs("button",{onClick:a,"aria-pressed":n,"aria-label":n?"Show sidebar":"Hide sidebar",className:`hidden lg:flex p-2 rounded-lg text-sm font-medium items-center gap-2 border transition-colors ${n?"border-slate-200 text-slate-600 hover:bg-slate-100":"bg-emerald-50 text-emerald-700 border-emerald-100"}`,title:n?"Show sidebar":"Hide sidebar",children:[n?t.jsx(ct,{className:"h-4 w-4"}):t.jsx(lt,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden xl:inline",children:n?"Show sidebar":"Hide sidebar"})]}),t.jsxs("button",{onClick:Ye,"aria-pressed":!E,"aria-label":E?"Show notes panel":"Hide notes panel",className:`p-2 rounded-lg text-sm font-medium flex items-center gap-2 border transition-colors ${E?"border-slate-200 text-slate-600 hover:bg-slate-100":"bg-brand-50 text-brand-700 border-brand-100"}`,children:[E?t.jsx(ut,{className:"h-4 w-4"}):t.jsx(dt,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:E?"Show notes":"Hide notes"})]}),t.jsx("button",{onClick:ze,className:"p-2 hover:bg-slate-200 rounded-lg transition-colors text-slate-600",title:"Exit Fullscreen",children:t.jsx(ws,{className:"h-5 w-5"})})]})]}),t.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:t.jsxs("div",{ref:k,className:"flex-1 flex flex-col gap-4 lg:flex-row lg:items-stretch px-4 pb-4 pt-2 overflow-hidden",children:[t.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-white relative border border-slate-200 rounded-xl shadow-sm",children:[t.jsxs("div",{className:"px-4 py-2 border-b border-slate-100 bg-white flex items-center gap-2 overflow-x-auto shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase text-slate-500 whitespace-nowrap",children:[t.jsx(ht,{className:"h-3 w-3 text-brand-500"}),"Quick prompts"]}),t.jsx("div",{className:"flex gap-2",children:Ot.map(s=>t.jsx("button",{onClick:()=>Pe(s.value),className:"flex-shrink-0 px-3 py-1 text-xs bg-slate-100 text-slate-700 rounded-full hover:bg-brand-50 hover:text-brand-700 transition-colors whitespace-nowrap",children:s.label},s.label))}),t.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[t.jsx("button",{onClick:()=>$e(!P),className:`p-1.5 rounded transition-colors flex items-center gap-1 ${P?"bg-brand-100 text-brand-700":"text-slate-400 hover:text-slate-600 hover:bg-slate-200"}`,title:"Text & Style Settings","aria-label":"Text style settings",children:t.jsx(be,{className:"h-4 w-4"})}),t.jsx("button",{onClick:Ke,className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-200 rounded transition-colors",title:"Export chat","aria-label":"Export chat",children:t.jsx(nt,{className:"h-4 w-4"})}),t.jsx("button",{onClick:Ue,className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Clear chat","aria-label":"Clear chat",children:t.jsx(tt,{className:"h-4 w-4"})})]})]}),t.jsx(B,{children:P&&t.jsx(R.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden border-b border-slate-200",children:t.jsxs("div",{className:"px-4 py-3 bg-gradient-to-br from-brand-50 to-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(be,{className:"h-4 w-4 text-brand-600"}),t.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Text & Style Settings"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 max-w-3xl",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Font Size"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(z).map(([s,c])=>t.jsxs("button",{onClick:()=>De(s),className:`px-3 py-2 text-xs rounded-lg border transition-all ${K===s?"bg-brand-600 text-white border-brand-600 shadow-md":"bg-white text-slate-700 border-slate-200 hover:border-brand-300 hover:bg-brand-50"}`,children:[t.jsx("div",{className:"font-semibold",children:c.label}),t.jsx("div",{className:"text-[10px] opacity-75",children:c.description})]},s))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Line Spacing"}),t.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(we).map(([s,c])=>t.jsx("button",{onClick:()=>Le(s),className:`px-3 py-2 text-xs rounded-lg border transition-all ${X===s?"bg-brand-600 text-white border-brand-600 shadow-md":"bg-white text-slate-700 border-slate-200 hover:border-brand-300 hover:bg-brand-50"}`,children:c.label},s))})]})]}),t.jsxs("p",{className:"text-xs text-slate-500 mt-3 flex items-center gap-1",children:[t.jsx(pe,{className:"h-3 w-3"}),"Settings are saved automatically and persist across sessions"]})]})})}),t.jsxs("div",{ref:Ce,className:`flex-1 overflow-y-auto p-4 md:p-8 ${qe} relative`,children:[i.map(s=>t.jsx(R.div,{id:`message-${s.id}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${s.sender==="user"?"justify-end":"justify-start"}`,children:t.jsxs("div",{className:`max-w-[90%] md:max-w-[70%] rounded-2xl ${Ve} group relative shadow-sm ${s.sender==="user"?"bg-brand-600 text-white rounded-br-none":s.isSystem?"bg-amber-50 text-amber-800 border border-amber-100":"bg-slate-100 text-slate-800 rounded-bl-none"} ${s.id===de?"ring-2 ring-brand-200 shadow-brand-200/60":""}`,children:[t.jsx("button",{onClick:()=>Se(s.text),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity text-slate-400 hover:text-brand-600 bg-white/20 p-1 rounded",title:"Copy message","aria-label":"Copy message",children:t.jsx(ge,{className:"h-3 w-3"})}),s.sender==="bot"&&!s.isSystem&&t.jsx("button",{onClick:()=>Ie(s.text),className:"absolute top-2 right-12 opacity-0 group-hover:opacity-100 transition-opacity text-slate-400 hover:text-brand-600 bg-white/20 p-1 rounded",title:"Save to notes","aria-label":"Save to notes",children:t.jsx(_e,{className:"h-3 w-3"})}),t.jsxs("div",{className:`flex items-center justify-between mb-1 opacity-75 ${We}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[s.sender==="user"?t.jsx(st,{className:"h-3 w-3"}):t.jsx(it,{className:"h-3 w-3"}),t.jsx("span",{className:"uppercase font-bold tracking-wider",children:s.sender})]}),J(s)&&t.jsx("span",{className:"opacity-75",children:J(s)})]}),t.jsx(Xe,{text:s.text,shouldAnimate:s.id===de&&s.sender==="bot"&&!s.isSystem}),s.link&&t.jsx("div",{className:"mt-3 pt-3 border-t border-black/10",children:t.jsxs("a",{href:`#${s.link}`,className:"text-xs font-bold flex items-center gap-1 hover:underline",children:["View Resource ",t.jsx(at,{className:"h-3 w-3"})]})})]})},s.id)),t.jsx(B,{children:ae&&t.jsx(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex justify-start",children:t.jsxs("div",{className:"bg-slate-100 rounded-2xl rounded-bl-none p-4 flex gap-1",children:[t.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),t.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce delay-75"}),t.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce delay-150"})]})})}),t.jsx("div",{ref:le})]}),t.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 shrink-0",children:[t.jsxs("div",{className:"max-w-4xl mx-auto w-full flex gap-2",children:[t.jsx("textarea",{ref:q,value:l,onChange:s=>d(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),he())},placeholder:"Ask anything about Power BI... (Shift+Enter for new line)",className:"input-field flex-1 shadow-sm resize-none min-h-[48px] max-h-[200px]",rows:1}),t.jsx("button",{onClick:he,disabled:!l.trim()||ae,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed px-6","aria-label":"Send message",children:t.jsx(ot,{className:"h-5 w-5"})})]}),!x&&t.jsxs("p",{className:"text-xs text-slate-400 mt-2 text-center",children:["Running in ",t.jsx("span",{className:"font-semibold text-brand-600",children:"Local Knowledge Mode"}),". Add an Access Code for full AI features."]})]})]}),Qe&&t.jsxs("div",{className:"flex flex-col gap-4 lg:gap-0 lg:flex-row shrink-0 w-full lg:w-auto",children:[V&&t.jsx("div",{className:"hidden lg:flex items-center justify-center w-5 cursor-col-resize select-none text-slate-400 hover:bg-slate-100 hover:text-brand-500 transition-colors -ml-2.5 z-10",role:"separator","aria-label":"Resize session notes panel","aria-orientation":"vertical",tabIndex:0,onPointerDown:Fe,onKeyDown:Be,title:"Drag to resize notes",children:t.jsx("div",{className:"flex flex-col items-center gap-1 bg-white/80 rounded-full px-1 py-3 shadow-sm border border-slate-200",children:t.jsx(rt,{className:"h-4 w-4"})})}),t.jsx("div",{className:"border border-slate-200 bg-slate-50 rounded-xl shadow-inner p-4 sm:p-5 flex flex-col w-full lg:w-auto transition-[width] duration-200",style:Ze,children:et})]})]})})]}):t.jsxs("div",{className:"flex flex-col gap-4 min-h-[calc(100vh-10rem)] sm:min-h-[calc(100vh-8rem)]",children:[t.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3 mb-2 sm:mb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[t.jsx(pe,{className:"h-6 w-6 text-brand-600"}),"Power BI Guru",F&&t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${F.className}`,children:F.text})]}),t.jsx("p",{className:"text-slate-600",children:"Your AI assistant for DAX, Design, and Strategy."}),x&&t.jsx("p",{className:"mt-1 text-xs text-slate-500",children:p?"Using your personal Gemini access code.":Je?"Using the built-in HHS Gemini access code.":"Using the currently stored Gemini access code."}),ie==="error"&&x&&t.jsxs("p",{className:"mt-1 text-sm text-rose-600 flex items-center gap-1",children:[t.jsx(os,{className:"h-4 w-4"}),t.jsx("span",{children:Pt||"Unable to connect to the AI. Update the access code in settings."})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsxs("button",{onClick:a,"aria-pressed":n,"aria-label":n?"Show sidebar":"Hide sidebar",className:`hidden lg:flex p-2 rounded-lg text-sm font-medium items-center gap-2 border transition-colors ${n?"border-slate-200 text-slate-600 hover:bg-slate-100":"bg-emerald-50 text-emerald-700 border-emerald-100"}`,title:n?"Show sidebar":"Hide sidebar",children:[n?t.jsx(ct,{className:"h-4 w-4"}):t.jsx(lt,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden xl:inline",children:n?"Show sidebar":"Hide sidebar"})]}),t.jsxs("button",{onClick:Ye,"aria-pressed":!E,"aria-label":E?"Show notes panel":"Hide notes panel",className:`p-2 rounded-lg text-sm font-medium flex items-center gap-2 border transition-colors ${E?"border-slate-200 text-slate-600 hover:bg-slate-100":"bg-brand-50 text-brand-700 border-brand-100"}`,children:[E?t.jsx(ut,{className:"h-4 w-4"}):t.jsx(dt,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:E?"Show notes":"Hide notes"})]}),t.jsx("button",{onClick:ze,className:"p-2 rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors",title:"Maximize (Fullscreen Mode)",children:t.jsx(ps,{className:"h-5 w-5"})}),t.jsx("button",{onClick:()=>_(!y),className:`p-2 rounded-lg transition-colors ${y?"bg-brand-50 text-brand-700":p?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,title:"Manage AI Access Code",children:t.jsx(_s,{className:"h-5 w-5"})})]})]}),t.jsx(B,{children:y&&t.jsx(R.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden mb-4",children:t.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[t.jsxs("h3",{className:"font-semibold text-slate-900 mb-2 flex items-center gap-2",children:[t.jsx(is,{className:"h-4 w-4"})," AI Settings"]}),t.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Enter your access code to enable full AI chat capabilities."}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"password",value:I,onChange:s=>S(s.target.value),placeholder:"Enter Access Code...",className:"input-field flex-1"}),t.jsx("button",{onClick:Wt,className:"btn-primary",children:"Save & Connect"}),p&&t.jsx("button",{onClick:Xt,className:"btn-secondary text-red-600 hover:bg-red-50",children:"Clear"})]}),t.jsxs("div",{className:"text-xs text-slate-500 mt-3 space-y-1",children:[t.jsx("p",{children:p?"Currently using your personal Gemini key. Clear to switch back to the built-in HHS access code.":Je?"Using the built-in HHS Gemini key by default. Add your own key if you need to run chats under a personal quota.":"No access code is configured yet. Add one to enable cloud AI responses."}),t.jsx("p",{className:"text-slate-400",children:"Any personal key you add stays in your browser only."})]})]})})}),t.jsxs("div",{ref:k,className:"flex-1 flex flex-col gap-4 lg:flex-row lg:items-stretch overflow-hidden",children:[t.jsxs("div",{className:"flex-1 bg-white border border-slate-200 rounded-xl shadow-sm overflow-hidden flex flex-col relative min-w-0 min-h-[420px]",children:[t.jsxs("div",{className:"bg-slate-50 border-b border-slate-200 px-3 sm:px-4 py-2 sm:py-3 flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(bs,{className:"h-4 w-4 text-slate-500"}),t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Conversation"}),t.jsxs("span",{className:"text-xs text-slate-500 bg-slate-200 px-2 py-0.5 rounded-full",children:[i.filter(s=>!s.isSystem).length," messages"]})]}),t.jsxs("div",{className:"flex gap-1.5 sm:gap-2 ml-auto",children:[t.jsx("button",{onClick:Ke,className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-200 rounded transition-colors",title:"Export chat",children:t.jsx(nt,{className:"h-4 w-4"})}),t.jsx("button",{onClick:Ue,className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Clear chat",children:t.jsx(tt,{className:"h-4 w-4"})})]})]}),t.jsxs("div",{className:"px-3 sm:px-4 py-2 sm:py-3 border-b border-slate-100 bg-white flex flex-wrap items-center gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase text-slate-500",children:[t.jsx(ht,{className:"h-3 w-3 text-brand-500"}),"Quick prompts"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Ot.map(s=>t.jsx("button",{onClick:()=>Pe(s.value),className:"px-3 py-1 text-xs bg-slate-100 text-slate-700 rounded-full hover:bg-brand-50 hover:text-brand-700 transition-colors",children:s.label},s.label))}),t.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>$e(!P),className:`text-xs px-3 py-1 rounded-full border flex items-center gap-1.5 ${P?"bg-brand-600 text-white border-brand-600":"border-slate-200 text-slate-600 hover:bg-slate-100"}`,title:"Text & Style Settings",children:[t.jsx(be,{className:"h-3 w-3"}),t.jsx("span",{className:"hidden sm:inline",children:"Style"})]}),t.jsx("button",{onClick:es,className:`text-xs px-3 py-1 rounded-full border ${ce?"bg-brand-600 text-white border-brand-600":"border-slate-200 text-slate-600"}`,children:ce?"Compact":"Normal"})]})]}),t.jsx(B,{children:P&&t.jsx(R.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden border-b border-slate-200",children:t.jsxs("div",{className:"px-3 sm:px-4 py-3 bg-gradient-to-br from-brand-50 to-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(be,{className:"h-4 w-4 text-brand-600"}),t.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Text & Style Settings"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Font Size"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(z).map(([s,c])=>t.jsxs("button",{onClick:()=>De(s),className:`px-3 py-2 text-xs rounded-lg border transition-all ${K===s?"bg-brand-600 text-white border-brand-600 shadow-md":"bg-white text-slate-700 border-slate-200 hover:border-brand-300 hover:bg-brand-50"}`,children:[t.jsx("div",{className:"font-semibold",children:c.label}),t.jsx("div",{className:"text-[10px] opacity-75",children:c.description})]},s))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Line Spacing"}),t.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(we).map(([s,c])=>t.jsx("button",{onClick:()=>Le(s),className:`px-3 py-2 text-xs rounded-lg border transition-all ${X===s?"bg-brand-600 text-white border-brand-600 shadow-md":"bg-white text-slate-700 border-slate-200 hover:border-brand-300 hover:bg-brand-50"}`,children:c.label},s))})]})]}),t.jsxs("p",{className:"text-xs text-slate-500 mt-3 flex items-center gap-1",children:[t.jsx(pe,{className:"h-3 w-3"}),"Settings are saved automatically and persist across sessions"]})]})})}),H&&t.jsxs("div",{className:"px-3 sm:px-4 py-2 sm:py-3 border-b border-slate-100 bg-slate-50 flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"flex-1 min-w-[240px]",children:[t.jsx("p",{className:"text-xs uppercase font-semibold text-slate-500 tracking-wide",children:"Current question"}),t.jsx("p",{className:"font-medium text-slate-900",children:xn(H.text,160)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>He(H.id),className:"px-3 py-1.5 text-xs rounded-full bg-white border border-slate-200 hover:border-brand-300 hover:text-brand-600 transition-colors flex items-center gap-1",children:[t.jsx(cs,{className:"h-3 w-3"})," Jump to question"]}),t.jsxs("button",{onClick:()=>Ie(H.text),className:"px-3 py-1.5 text-xs rounded-full bg-brand-50 text-brand-700 border border-brand-100 flex items-center gap-1",children:[t.jsx(_e,{className:"h-3 w-3"})," Save"]})]})]}),t.jsxs("div",{ref:Ce,className:`flex-1 overflow-y-auto p-3 sm:p-4 lg:p-5 ${qe} relative`,children:[i.map(s=>t.jsx(R.div,{id:`message-${s.id}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${s.sender==="user"?"justify-end":"justify-start"}`,children:t.jsxs("div",{className:`max-w-[80%] rounded-2xl ${Ve} group relative ${s.sender==="user"?"bg-brand-600 text-white rounded-br-none":s.isSystem?"bg-amber-50 text-amber-800 border border-amber-100":"bg-slate-100 text-slate-800 rounded-bl-none"} ${s.id===de?"ring-2 ring-brand-200 shadow-lg shadow-brand-200/60":""}`,children:[t.jsx("button",{onClick:()=>Se(s.text),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity text-slate-400 hover:text-brand-600",title:"Copy message","aria-label":"Copy message",children:t.jsx(ge,{className:"h-4 w-4"})}),s.sender==="bot"&&!s.isSystem&&t.jsx("button",{onClick:()=>Ie(s.text),className:"absolute top-2 right-10 opacity-0 group-hover:opacity-100 transition-opacity text-slate-400 hover:text-brand-600",title:"Save to notes","aria-label":"Save to notes",children:t.jsx(_e,{className:"h-4 w-4"})}),t.jsxs("div",{className:`flex items-center justify-between mb-1 opacity-75 ${We}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[s.sender==="user"?t.jsx(st,{className:"h-3 w-3"}):t.jsx(it,{className:"h-3 w-3"}),t.jsx("span",{className:"uppercase font-bold tracking-wider",children:s.sender})]}),J(s)&&t.jsx("span",{className:"text-slate-400",children:J(s)})]}),t.jsx(Xe,{text:s.text,shouldAnimate:s.id===de&&s.sender==="bot"&&!s.isSystem}),s.link&&t.jsx("div",{className:"mt-3 pt-3 border-t border-black/10",children:t.jsxs("a",{href:`#${s.link}`,className:"text-xs font-bold flex items-center gap-1 hover:underline",children:["View Resource ",t.jsx(at,{className:"h-3 w-3"})]})})]})},s.id)),t.jsx(B,{children:ae&&t.jsx(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex justify-start",children:t.jsxs("div",{className:"bg-slate-100 rounded-2xl rounded-bl-none p-4 flex gap-1",children:[t.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),t.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce delay-75"}),t.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce delay-150"})]})})}),t.jsx("div",{ref:le})]}),t.jsx(B,{children:!Ft&&t.jsx(R.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:Ge,className:"absolute bottom-24 right-4 bg-brand-600 text-white p-2 rounded-full shadow-lg hover:bg-brand-700 transition-colors z-10",title:"Scroll to bottom",children:t.jsx(rs,{className:"h-4 w-4"})})}),t.jsxs("div",{className:"p-3 sm:p-4 bg-slate-50 border-t border-slate-200",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("textarea",{ref:q,value:l,onChange:s=>d(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),he())},placeholder:"Ask anything about Power BI... (Shift+Enter for new line)",className:"input-field flex-1 shadow-sm resize-none min-h-[48px] max-h-[200px]",rows:1}),t.jsx("button",{onClick:he,disabled:!l.trim()||ae,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Send message",children:t.jsx(ot,{className:"h-4 w-4"})})]}),t.jsxs("p",{className:"text-xs text-slate-400 mt-2 text-center flex flex-wrap items-center justify-center gap-2",children:[t.jsx("span",{children:"Enter = Send"}),t.jsx("span",{children:"Shift+Enter = New line"}),t.jsx("span",{children:"Copy buttons appear when you hover a message"})]}),!x&&t.jsxs("p",{className:"text-xs text-slate-400 mt-2 text-center",children:["Running in ",t.jsx("span",{className:"font-semibold text-brand-600",children:"Local Knowledge Mode"}),". Add an Access Code for full AI features."]})]})]}),Qe&&t.jsxs("div",{className:"flex flex-col gap-4 lg:gap-0 lg:flex-row shrink-0 w-full lg:w-auto",children:[V&&t.jsx("div",{className:"hidden lg:flex items-center justify-center w-5 cursor-col-resize select-none text-slate-400 hover:bg-slate-100 hover:text-brand-500 transition-colors -ml-2.5 z-10",role:"separator","aria-label":"Resize session notes panel","aria-orientation":"vertical",tabIndex:0,onPointerDown:Fe,onKeyDown:Be,title:"Drag to resize notes",children:t.jsx("div",{className:"flex flex-col items-center gap-1 bg-white/80 rounded-full px-1 py-3 shadow-sm border border-slate-200",children:t.jsx(rt,{className:"h-4 w-4"})})}),t.jsx("aside",{className:"bg-white border border-slate-200 rounded-xl shadow-sm p-4 sm:p-5 flex flex-col w-full lg:w-auto min-h-[260px] transition-[width] duration-200",style:Ze,children:et})]})]})]})};export{Cn as default};
