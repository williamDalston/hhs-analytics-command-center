import{c as b,u as Ce,r as n,j as e,S as se,a as _e,U as ae,T as O,m as re,F as De}from"./index-BilV0Xc3.js";import{S as A,K as Fe}from"./send-CXraf3CO.js";import{D as Ae}from"./download-CfuUTAsL.js";import{C as Ee}from"./copy-Bh0vUINc.js";const Te=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Me=b("cloud",Te);const Le=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Ie=b("file",Le);const Ue=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Re=b("hard-drive",Ue);const $e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ke=b("image",$e);const Oe=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],E=b("link",Oe);const ze=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],ne=b("lock-open",ze);const Pe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],z=b("lock",Pe);const Ve=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Be=b("refresh-cw",Ve);const qe=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Ge=b("shuffle",qe),He=()=>null,Je=async a=>{const r=new TextEncoder,i=await crypto.subtle.importKey("raw",r.encode(a),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);return await crypto.subtle.deriveKey({name:"PBKDF2",salt:r.encode("hhs-analytics-secure-salt-v1"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])},oe=async(a,r)=>{const i=crypto.getRandomValues(new Uint8Array(12)),x=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},r,a),g=new Uint8Array(i.length+x.byteLength);return g.set(i,0),g.set(new Uint8Array(x),i.length),{encrypted:g,iv:Array.from(i)}},le=async(a,r)=>{const i=a.slice(0,12),x=a.slice(12);try{return await crypto.subtle.decrypt({name:"AES-GCM",iv:i},r,x)}catch(g){throw console.error("Decryption failed",g),new Error("Decryption failed")}},Xe=()=>{const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";const i=new Uint8Array(12);crypto.getRandomValues(i);for(let x=0;x<12;x++)r+=a[i[x]%a.length];return r},Ze="portal_messages_",Qe="portal_files_",q=a=>a?`${Ze}${a}`:"",P=a=>{if(typeof window>"u"||!a)return[];try{const r=window.localStorage.getItem(q(a));return r?JSON.parse(r):[]}catch(r){return console.error("Failed to read local portal messages",r),[]}},V=(a,r)=>{if(!(typeof window>"u"||!a))try{window.localStorage.setItem(q(a),JSON.stringify(r))}catch(i){console.error("Failed to persist local portal messages",i)}},G=a=>a?`${Qe}${a}`:"",B=a=>{if(typeof window>"u"||!a)return[];try{const r=window.localStorage.getItem(G(a));return r?JSON.parse(r):[]}catch(r){return console.error("Failed to read local portal files",r),[]}},ce=(a,r)=>{if(!(typeof window>"u"||!a))try{window.localStorage.setItem(G(a),JSON.stringify(r))}catch(i){console.error("Failed to persist local portal files",i)}},st=()=>{const{addToast:a}=Ce(),[r,i]=n.useState("messages"),[x,g]=n.useState(!1),[c,N]=n.useState(""),[w,H]=n.useState(null),[p,ie]=n.useState(!1),[J,k]=n.useState(""),[X,v]=n.useState([]),[_,j]=n.useState([]),[S,Z]=n.useState(""),[T,Q]=n.useState(!1),[M,de]=n.useState(""),[L,me]=n.useState(""),[I,he]=n.useState(""),[W,xe]=n.useState(""),[U,R]=n.useState(!1),$=n.useRef(null),Y=n.useRef(null),K=n.useRef(null),C=n.useRef(null),h=He(),u=n.useCallback(async t=>{const s=t||c;if(!s)return;if(!p||!h){const y=P(s);j(Array.isArray(y)?y:[]);const m=B(s);v(Array.isArray(m)?m:[]);return}const{data:o,error:l}=await h.from("portal_files").select("*").eq("token",s).order("uploaded_at",{ascending:!1});if(l)console.error("Failed to load files",l);else if(o){const y=o.map(m=>({id:m.id,name:m.file_name,type:m.file_type,size:m.file_size,encrypted:m.encrypted_data,uploadedAt:m.uploaded_at,uploadedBy:m.uploaded_by}));v(y)}const{data:d,error:f}=await h.from("portal_messages").select("*").eq("token",s).order("created_at",{ascending:!0});if(f)console.error("Failed to load messages",f);else if(d){const y=d.map(m=>({id:m.id,text:m.message_text,author:m.author,timestamp:m.created_at}));j(y)}},[c,h,p]),D=n.useCallback(async t=>{const s=t||c;if(!s||s.length<8){k("Token must be at least 8 characters");return}try{const o=await Je(s);H(o),N(s),g(!0),k(""),typeof window<"u"&&localStorage.setItem("portal_access_token",s),await u(s)}catch(o){k("Authentication failed"),console.error("Authentication failed",o)}},[c,u]);n.useEffect(()=>{r==="messages"&&K.current&&K.current.scrollIntoView({behavior:"smooth"})},[_,r]),n.useEffect(()=>{r==="messages"&&C.current&&C.current.focus()},[r]),n.useEffect(()=>{if(typeof window>"u")return;let t;if(window.location.hash&&window.location.hash.includes("?")){const l=window.location.hash.split("?")[1];t=new URLSearchParams(l)}else t=new URLSearchParams(window.location.search);const s=t.get("tab"),o=t.get("token");s&&["messages","files","encrypt"].includes(s)&&i(s),o&&o.length>=8&&!x&&(N(o),a('Token loaded from link. Click "Unlock Portal" to enter.',"info"))},[a,x]),n.useEffect(()=>{h&&ie(!0)},[h]),n.useEffect(()=>{if(typeof window>"u")return;const t=localStorage.getItem("portal_access_token");t&&(N(t),D(t))},[D]),n.useEffect(()=>{if(x)return Y.current=setInterval(()=>{u()},5e3),()=>clearInterval(Y.current)},[x,w,u]),n.useEffect(()=>{if(typeof window>"u"||!x||p||!c)return;const t=q(c),s=G(c);if(!t&&!s)return;const o=l=>{if(l.key===t){try{const d=l.newValue?JSON.parse(l.newValue):[];j(Array.isArray(d)?d:[])}catch(d){console.error("Failed to sync portal messages from storage event",d)}return}if(l.key===s)try{const d=l.newValue?JSON.parse(l.newValue):[];v(Array.isArray(d)?d:[])}catch(d){console.error("Failed to sync portal files from storage event",d)}};return window.addEventListener("storage",o),()=>window.removeEventListener("storage",o)},[c,x,p]);const pe=()=>{typeof window<"u"&&(localStorage.removeItem("portal_access_token"),window.history.replaceState({},"",window.location.pathname)),g(!1),N(""),H(null),v([]),j([])},ee=async()=>{if(!S.trim()||!w)return;const t={text:S,author:"User",timestamp:new Date().toISOString()};try{if(p&&h)await h.from("portal_messages").insert({token:c,message_text:S,author:"User"}),await u();else{const s={...t,id:Date.now()},l=[...P(c),s];V(c,l),j(l)}Z(""),C.current&&C.current.focus()}catch(s){a("Failed to send message","error"),console.error("Failed to send message",s)}},ue=async t=>{if(p&&h)await h.from("portal_messages").delete().eq("id",t),await u(),a("Message deleted","success");else{const o=P(c).filter(l=>l.id!==t);V(c,o),j(o),a("Message deleted","success")}},fe=async()=>{confirm("Are you sure you want to clear all messages?")&&(p&&h?(await h.from("portal_messages").delete().eq("token",c),await u()):(V(c,[]),j([])),a("Chat cleared","success"))},te=async t=>{if(!(!t.length||!w)){Q(!0);try{for(const s of t){const o=await s.arrayBuffer(),{encrypted:l}=await oe(o,w),d=btoa(String.fromCharCode(...l));if(p&&h)await h.from("portal_files").insert({token:c,file_name:s.name,file_type:s.type,file_size:s.size,encrypted_data:d,iv:"included_in_data",uploaded_by:"User"});else{const f={id:`${Date.now()}-${s.name}-${Math.random().toString(36).slice(2)}`,name:s.name,type:s.type,size:s.size,encrypted:d,uploadedAt:new Date().toISOString(),uploadedBy:"User"},y=B(c),m=[f,...y];ce(c,m),v(m)}}p&&h&&await u(),a("Files uploaded securely","success")}catch(s){k("Upload failed"),console.error(s)}finally{Q(!1),$.current&&($.current.value="")}}},ye=async t=>{const s=Array.from(t.target.files);await te(s)},ge=t=>{t.preventDefault(),R(!0)},we=t=>{t.preventDefault(),R(!1)},be=async t=>{t.preventDefault(),R(!1);const s=Array.from(t.dataTransfer.files);s.length>0&&await te(s)},je=async t=>{try{const s=Uint8Array.from(atob(t.encrypted),y=>y.charCodeAt(0)),o=await le(s,w),l=new Blob([o],{type:t.type}),d=URL.createObjectURL(l),f=document.createElement("a");f.href=d,f.download=t.name,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(d)}catch(s){a("Decryption failed. Check your key/token.","error"),console.error("Decryption failed during download",s)}},Ne=async t=>{if(p&&h)await h.from("portal_files").delete().eq("id",t),await u(),a("File deleted","success");else{const o=B(c).filter(l=>l.id!==t);ce(c,o),v(o),a("File deleted","success")}},ve=async()=>{if(!M||!w)return;const t=new TextEncoder,{encrypted:s}=await oe(t.encode(M),w);me(btoa(String.fromCharCode(...s)))},ke=async()=>{if(!(!I||!w))try{const t=Uint8Array.from(atob(I),l=>l.charCodeAt(0)),s=await le(t,w),o=new TextDecoder;xe(o.decode(s))}catch(t){a("Decryption failed","error"),console.error("Text decryption failed",t)}},Se=()=>{const t=Xe();N(t),k("")},F=()=>{const t=`${window.location.origin}${window.location.pathname}#/portal?token=${c}`;navigator.clipboard.writeText(t),a("Invite link copied! Send it to a colleague.","success")};return x?e.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-brand-600 rounded-lg flex items-center justify-center text-white",children:e.jsx(se,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg text-slate-900",children:"Secure Portal"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-green-50 text-green-700 px-2 py-0.5 rounded border border-green-100",children:[e.jsx(z,{className:"h-3 w-3"})," End-to-End Encrypted"]}),e.jsxs("button",{onClick:F,className:"flex items-center gap-1 hover:bg-slate-100 px-2 py-0.5 rounded transition-colors cursor-pointer group",title:"Copy invite link",children:[e.jsxs("span",{className:"font-mono font-bold",children:[c.slice(0,4),"***"]}),e.jsx(E,{className:"h-3 w-3 text-slate-400 group-hover:text-brand-600"})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:F,className:"btn-secondary text-sm hidden lg:flex",children:[e.jsx(E,{className:"h-4 w-4 mr-2"})," Invite"]}),e.jsxs("button",{onClick:pe,className:"btn-secondary text-sm text-red-600 hover:bg-red-50 border-red-200",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"})," Leave"]})]})]}),e.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-lg w-fit",children:["messages","files","encrypt"].map(t=>e.jsxs("button",{onClick:()=>i(t),className:`px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center gap-2 ${r===t?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[t==="messages"&&e.jsx(A,{className:"h-4 w-4"}),t==="files"&&e.jsx(ae,{className:"h-4 w-4"}),t==="encrypt"&&e.jsx(Fe,{className:"h-4 w-4"}),t.charAt(0).toUpperCase()+t.slice(1)]},t))}),r==="messages"&&e.jsxs("div",{className:"card h-[600px] flex flex-col p-0 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4 text-brand-500"})," Secure Chat"]}),e.jsxs("div",{className:"flex gap-2",children:[_.length>0&&e.jsx("button",{onClick:fe,className:"p-2 hover:bg-red-50 text-slate-400 hover:text-red-500 rounded-full transition-colors",title:"Clear all messages",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>u(),className:"p-2 hover:bg-slate-200 rounded-full transition-colors",title:"Refresh",children:e.jsx(Be,{className:"h-4 w-4 text-slate-500"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50",children:[_.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[e.jsx("div",{className:"bg-slate-100 p-4 rounded-full mb-4",children:e.jsx(A,{className:"h-8 w-8 text-slate-300"})}),e.jsx("p",{className:"font-medium text-slate-600",children:"No messages yet"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1 max-w-xs text-center",children:"Share this room's token with others to start chatting securely."}),e.jsxs("button",{onClick:F,className:"mt-4 text-brand-600 text-sm font-medium hover:underline flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"})," Copy Invite Link"]})]}):_.map(t=>e.jsx(re.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"group flex flex-col items-end",children:e.jsxs("div",{className:"max-w-[80%] bg-white border border-slate-200 p-3 rounded-2xl rounded-tr-sm shadow-sm hover:shadow-md transition-shadow relative",children:[e.jsx("p",{className:"text-slate-800 whitespace-pre-wrap",children:t.text}),e.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(t.timestamp).toLocaleTimeString()}),e.jsx("button",{onClick:()=>ue(t.id),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-red-50 rounded text-red-500",title:"Delete message",children:e.jsx(O,{className:"h-3 w-3"})})]})]})},t.id)),e.jsx("div",{ref:K})]}),e.jsxs("div",{className:"p-4 bg-white border-t border-slate-100",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{ref:C,value:S,onChange:t=>Z(t.target.value),onKeyDown:t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),ee())},placeholder:"Type a secure message...",className:"input-field flex-1 resize-none",rows:2}),e.jsx("button",{onClick:ee,disabled:!S.trim(),className:"btn-primary self-end",children:e.jsx(A,{className:"h-5 w-5"})})]}),e.jsxs("p",{className:"text-xs text-center text-slate-400 mt-2 flex items-center justify-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"})," Encrypted & Synced Instantly"]})]})]}),r==="files"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`card border-2 border-dashed transition-all duration-200 ${U?"border-brand-500 bg-brand-50 scale-[1.01] shadow-lg":"border-brand-200 hover:border-brand-400 bg-brand-50/30"}`,onDragOver:ge,onDragLeave:we,onDrop:be,children:[e.jsx("input",{type:"file",multiple:!0,onChange:ye,className:"hidden",id:"file-upload",ref:$,disabled:T}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center py-12",children:[e.jsx("div",{className:`h-20 w-20 rounded-full shadow-sm flex items-center justify-center mb-4 transition-colors ${U?"bg-brand-100":"bg-white"}`,children:e.jsx(ae,{className:`h-10 w-10 text-brand-600 ${T?"animate-bounce":""}`})}),e.jsx("span",{className:"text-xl font-bold text-brand-900 mb-2",children:T?"Encrypting & Uploading...":U?"Drop Files to Securely Upload":"Click or Drag Files Here"}),e.jsx("span",{className:"text-sm text-slate-500 max-w-xs text-center",children:"Files are encrypted client-side with AES-GCM before leaving your browser"})]})]}),e.jsxs("div",{className:"grid gap-4",children:[X.map(t=>e.jsxs(re.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:"card flex items-center gap-4 p-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"h-12 w-12 bg-slate-100 rounded-lg flex items-center justify-center",children:t.type.includes("image")?e.jsx(Ke,{className:"h-6 w-6 text-slate-500"}):e.jsx(De,{className:"h-6 w-6 text-slate-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-slate-900 truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[(t.size/1024).toFixed(1)," KB â€¢ ",new Date(t.uploadedAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>je(t),className:"btn-secondary text-xs",children:[e.jsx(Ae,{className:"h-4 w-4 mr-1"})," Download"]}),e.jsx("button",{onClick:()=>Ne(t.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(O,{className:"h-4 w-4"})})]})]},t.id)),X.length===0&&e.jsxs("div",{className:"text-center py-12 text-slate-400",children:[e.jsx(Ie,{className:"h-12 w-12 mx-auto mb-2 opacity-20"}),e.jsx("p",{children:"No files shared yet"}),e.jsxs("button",{onClick:F,className:"mt-2 text-brand-600 text-sm font-medium hover:underline inline-flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"})," Invite others to share"]})]})]})]}),r==="encrypt"&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card space-y-4",children:[e.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5 text-brand-600"})," Encrypt Text"]}),e.jsx("textarea",{value:M,onChange:t=>de(t.target.value),className:"input-field w-full h-32 resize-none",placeholder:"Enter sensitive text..."}),e.jsx("button",{onClick:ve,className:"btn-primary w-full",children:"Encrypt"}),L&&e.jsxs("div",{className:"bg-slate-900 text-green-400 p-3 rounded-lg text-xs font-mono break-all relative group",children:[L,e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(L),a("Copied!","success")},className:"absolute top-2 right-2 p-1 bg-slate-800 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ee,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"card space-y-4",children:[e.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-brand-600"})," Decrypt Text"]}),e.jsx("textarea",{value:I,onChange:t=>he(t.target.value),className:"input-field w-full h-32 resize-none",placeholder:"Paste encrypted string..."}),e.jsx("button",{onClick:ke,className:"btn-secondary w-full",children:"Decrypt"}),W&&e.jsx("div",{className:"bg-green-50 text-green-900 p-3 rounded-lg text-sm border border-green-200",children:W})]})]})]}):e.jsx("div",{className:"max-w-md mx-auto mt-10",children:e.jsxs("div",{className:"card text-center p-8 space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"h-16 w-16 bg-brand-100 rounded-full flex items-center justify-center",children:e.jsx(se,{className:"h-8 w-8 text-brand-600"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Secure Access"}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Enter a room token to join a secure session."})]}),e.jsxs("div",{className:"space-y-4 text-left",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Room Token"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"password",value:c,onChange:t=>N(t.target.value),className:"input-field flex-1 text-base sm:text-lg tracking-widest",placeholder:"Paste token here...",onKeyDown:t=>t.key==="Enter"&&D()}),e.jsx("button",{onClick:Se,className:"p-3 bg-slate-100 hover:bg-slate-200 rounded-lg text-slate-600 transition-colors",title:"Generate Random Token",children:e.jsx(Ge,{className:"h-5 w-5"})})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Don't have a token? Click the shuffle button to create a new secure room."})]}),J&&e.jsxs("div",{className:"p-3 bg-red-50 text-red-700 text-sm rounded-lg flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4"})," ",J]}),e.jsx("button",{onClick:()=>D(),className:"btn-primary w-full py-3 font-bold text-lg shadow-md hover:shadow-lg transition-all",children:"Unlock Portal"})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100",children:e.jsx("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-500",children:p?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-4 w-4 text-green-500"})," Cloud Sync Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-4 w-4 text-amber-500"})," Local Mode"]})})})]})})};export{st as default};
